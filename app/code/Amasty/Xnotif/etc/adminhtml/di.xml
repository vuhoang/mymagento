<?xml version="1.0"?>
<!--
/**
 * @author Amasty Team
 * @copyright Copyright (c) 2020 Amasty (https://www.amasty.com)
 * @package Amasty_Xnotif
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <preference for="Magento\Catalog\Block\Adminhtml\Product\Edit\Tab\Alerts\Price"
                type="Amasty\Xnotif\Block\Adminhtml\Catalog\Product\Edit\Tab\Alerts\Price"/>
    <preference for="Magento\Catalog\Block\Adminhtml\Product\Edit\Tab\Alerts\Stock"
                type="Amasty\Xnotif\Block\Adminhtml\Catalog\Product\Edit\Tab\Alerts\Stock"/>

    <virtualType name="Magento\Catalog\Ui\DataProvider\Product\Form\Modifier\Pool">
        <arguments>
            <argument name="modifiers" xsi:type="array">
                <item name="product_alerts" xsi:type="array">
                    <item name="class" xsi:type="string">Amasty\Xnotif\Ui\DataProvider\Product\Form\Modifier\Alerts</item>
                    <item name="sortOrder" xsi:type="number">130</item>
                </item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Magento\Backend\Model\Url">
        <plugin name="Amasty_Xnotif::test-frontend-url" type="Amasty\Xnotif\Plugins\Backend\Model\Url"/>
    </type>

    <type name="Magento\Framework\App\Config\Value">
        <plugin name="Amasty_Xnotif::sync-qty-below" type="Amasty\Xnotif\Plugins\Backend\Config\ValueSync"/>
    </type>

    <type name="Magento\PageBuilder\Model\Stage\Preview">
        <plugin name="Amasty_Xnotif::fix-ee-234-image-factory-bug"
                type="Amasty\Xnotif\Plugins\PageBuilder\Model\Stage\Preview" sortOrder="1" />
    </type>
</config>
